@model CommandsViewModel
@*@{ ViewData["Caption"] = "Отправка команды на терминал";
                //Layout = null; }*@

@using (Html.BeginForm("Index", "Events", FormMethod.Post, htmlAttributes: new { id = "filterr" }))
{
    <div class="catalog">
        <div class="catalog__head">

            <span class="catalog__label">Отправка команды на терминал</span>
            <table>
                <tr>
                    <td>
                        <span class="catalog__label">ID Терминала(ов)</span>
                    </td>
                    <td>
                        <span class="catalog__label">Команда</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input class="IDTerInput" />
                    </td>
                    <td>
                        <div class="box catalog__head-row">
                            <div class="pseudoselect catalog__select">
                                <input type="text" class="pseudoselect__input" placeholder="Выбрать из списка">
                                <div class="pseudoselect__dropdown custom-scroll">
                                    <div class="pseudoselect__list">
                                        @foreach (var data in Model.Commands)
                                        {
                                            <li data-id_cmd="@data.id">@data.name</li>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>

                </tr>
            </table>
            <button class="btn catalog__btn">Применить</button>
            <div class="box catalog__head-row">

            </div>
            
        </div>
        @{double summa = 0;}
        <div class="catalog__body">
            <div class="table-wrapper">
                <table class="catalog__table">
                    <thead>
                        <tr>
                            <th class="" data-column="0" width="60">№</th>
                            <th class="sort" data-column="1" width="110">Дата <br>и время</th>
                            <th class="sort" data-column="2" width="400">Автомат</th>
                            <th class="sort" data-column="3" width="110">Событие</th>
                            <th class="sort" data-column="4" width="90">Товар</th>
                            <th class="sort" data-column="5" width="90">Сумма</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="5">Итого:</td>
                            <td>@($"{summa:0.00} руб.")</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
}
                @section Scripts
{
                    <script>
                        $(document).on('click ', function (e) {
                            if ($('.nav_menu').css('display') == 'block' && $($(e.target).parent()).attr('class') != 'open_menu_mob' && $(window).width() < 993) {
                                $('.nav_menu').fadeOut();
                            }
                        });
                        $('.open_menu_mob').on('click', function () {
                            $('.nav_menu').fadeIn();
                        });
                        $(function () {
                            let Order_num = $("#Order_num").val();
                            let Order_direction = $("#Order_direction").val();

                            $('[data-column=' + Order_num + ']').addClass(Order_direction > 0 ? 'sort-up' : 'sort-down');

                            $('.sort').on('click', function () {
                                $("#Order_num").val($(this).data('column'));

                                if ($(this).attr('class') == "sort") {
                                    $("#Order_direction").val('-1');
                                } else {
                                    if ($(this).hasClass('sort-up')) {
                                        $("#Order_direction").val('-1');
                                    } else {
                                        $("#Order_direction").val('1');
                                    }
                                }
                                $('#filterr').submit();
                            });
                        });
                        $('.add_item').on('click', function (e) {
                            e.preventDefault(); // этот код предотвращает стандартное поведение браузера по клику
                            $('.action_name').val($(this).data('action'));
                            $('#filterr_action').submit();
                        });
                        $('.edit_item').on('click', function () {
                            $('.id_action').val($(this).data('id'));
                            $('.name_action').val($(this).data('name'));
                            $('.action_name').val($(this).data('action'));
                            $('#filterr_action').submit();
                        });
                        $('.delete_item').on('click', function () {
                            $('#filterr_delete').find('.id_action_del').val($(this).data('id'));
                            $('.edite_add_block').fadeIn();
                        });
                        $('.delete_item_ok').on('click', function () {
                            $('#filterr_delete').submit();
                            $('.edite_add_block').fadeOut();
                        });
                        $('.btn.catalog__btn.gray').on('click', function (e) {
                            e.preventDefault(); // этот код предотвращает стандартное поведение браузера по клику
                            if ($('.del_formm').css('display') == 'block') {
                                $('.edite_add_block').fadeOut();
                            } else {
                                location.href = window.location.href;
                            }
                        });

                        $('.page_table').on('click', function () {
                            var page = $(this).data('page');
                            $('.page_table.active').removeClass('active');
                            $(this).addClass('active');
                            $('.active_list').removeClass('active_list');
                            $('[data-list=' + page + ']').addClass('active_list');
                            $("body,html").animate({
                                scrollTop: 0
                            }, 800);
                        });
                    </script>

                }